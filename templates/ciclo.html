<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CareerPath | Ciclo de Estudos</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
    
    <link rel="stylesheet" href="css/pages/style-comum.css">
    <link rel="stylesheet" href="css/pages/ciclo.css">
    <script src="js/comum.js"></script>
</head>
<body>

    <main class="tracker-content-area">
        <div id="cycle-selection-view" class="view">
            <h2>Selecione ou Crie um Ciclo</h2>
            <div class="form-group" style="margin-bottom: 20px; text-align: left;">
                <label for="existingCycleSelector" style="display: block; margin-bottom: 8px; font-weight: 500;">Escolha um ciclo existente</label>
                <select id="existingCycleSelector"></select>
            </div>
            <button onclick="loadSelectedCycle()">Carregar Ciclo</button>
            <div style="margin: 25px 0; font-weight: bold; color: #999;">OU</div>
            <div class="form-group" style="margin-bottom: 20px; text-align: left;">
                <label for="newCycleNameInput" style="display: block; margin-bottom: 8px; font-weight: 500;">Crie um novo ciclo</label>
                <input type="text" id="newCycleNameInput" placeholder="Ex: Trilha Front-End...">
            </div>
            <button onclick="createNewCycle()">Criar e Iniciar</button>
        </div>

        <div id="current-view" class="view">
            <header class="page-header">
                <span class="material-icons-outlined">track_changes</span>
                <span id="cycleTitleText"></span>
            </header>
            <div class="content-wrapper">
                <div class="stats">
                    <div class="stat-card"><div class="stat-number" id="cycleCompletions">0</div><div class="stat-label">Vezes Concluído</div></div>
                    <div class="stat-card"><div class="stat-number" id="totalDisciplines">0</div><div class="stat-label">Disciplinas</div></div>
                    <div class="stat-card"><div class="stat-number" id="totalHours">0h</div><div class="stat-label">Horas Hoje</div></div>
                </div>
                
                <div class="add-discipline-form">
                    <div class="form-title">Adicionar Nova Disciplina</div>
                    <div class="input-row">
                        <div class="input-group"><input type="text" id="disciplineInput" placeholder="Nome da disciplina..."></div>
                        <div class="time-input-container">
                            <div class="time-input-group"><label for="hoursInput">Horas</label><input type="number" id="hoursInput" min="0" value="1"></div>
                            <span class="time-input-separator">:</span>
                            <div class="time-input-group"><label for="minutesInput">Minutos</label><input type="number" id="minutesInput" min="0" max="59" step="5" value="0"></div>
                        </div>
                        <button onclick="addDiscipline()">Adicionar</button>
                    </div>
                </div>

                <div class="chart-container" id="chartContainer"><svg id="wheelChart" width="400" height="400" viewBox="0 0 400 400"></svg></div>
                <div class="discipline-list" id="disciplinesList"></div>

                <div id="mainControls" style="display:flex; flex-wrap: wrap; gap:10px; margin-top:30px; justify-content:center;">
                    <button class="secondary" onclick="returnToCycleSelection()">Trocar de Ciclo</button>
                    <button class="secondary" onclick="manuallyEndCycle()">Encerrar Ciclo</button>
                    <button class="danger" onclick="deleteCurrentCycle()">Apagar Ciclo Atual</button>
                </div>
            </div>
        </div>
    </main>

    <div id="completionModal" class="modal-overlay"> <div class="modal-content"> <h3>Ciclo Concluído!</h3> <p>Parabéns! O que deseja fazer?</p> <div class="modal-buttons"> <button class="secondary" onclick="handleContinueCycle()">Continuar Neste Ciclo</button> <button onclick="handleStartNewCycle()">Iniciar Novo Ciclo</button> </div> </div> </div>
    <div id="celebrationModal" class="modal-overlay"> <div class="modal-content"> <svg class="trophy-icon" viewBox="0 0 24 24"><path d="M20.2,4H22L19,2H5L2,4h1.8C4.4,4.8,5,5.9,5,7c0,1.5-1.2,2.7-2.7,2.9C2.1,10,2,10.1,2,10.3V12h1v9H2v1h20v-1h-1v-9h1v-1.7 c0-0.2-0.1-0.3-0.3-0.4C21.2,9.7,20,8.5,20,7C20,5.9,20.6,4.8,21.2,4H20.2z M4,12h2.1c0.5-0.7,1.2-1.3,2-1.7V12H4z M15.9,10.3 c0.8,0.4,1.5,1,2,1.7H20V12h-4.1V10.3z M12,6c1.1,0,2,0.9,2,2s-0.9,2-2,2s-2-0.9-2-2S10.9,6,12,6z"/></svg> <h3>Missão Cumprida!</h3> <p>O ciclo foi concluído e contabilizado!</p> <div class="modal-buttons"> <button onclick="hideCelebrationModal()">Fechar</button> </div> </div> </div>
    <div id="alertModal" class="modal-overlay"> <div class="modal-content"> <h3 id="alertModalTitle">Atenção</h3> <p id="alertModalMessage"></p> <div class="modal-buttons"> <button onclick="hideAlertModal()">OK</button> </div> </div> </div>
    <div id="confirmModal" class="modal-overlay"> <div class="modal-content"> <h3 id="confirmModalTitle">Confirmar Ação</h3> <p id="confirmModalMessage"></p> <div class="modal-buttons"> <button class="secondary" onclick="hideConfirmModal()">Cancelar</button> <button class="danger" onclick="handleConfirmAction()">Confirmar</button> </div> </div> </div>
    <div id="editDisciplineModal" class="modal-overlay"> <div class="modal-content"> <h3>Editar Disciplina</h3> <input type="hidden" id="editDisciplineId"> <div class="form-group-modal"> <label for="editDisciplineName">Nome</label> <input type="text" id="editDisciplineName"> </div> <div class="form-group-modal"> <label>Meta</label> <div class="time-input-container" style="justify-content: center;"> <div class="time-input-group"> <label for="editHoursInput">Horas</label> <input type="number" id="editHoursInput" min="0"> </div> <span class="time-input-separator">:</span> <div class="time-input-group"> <label for="editMinutesInput">Minutos</label> <input type="number" id="editMinutesInput" min="0" max="59" step="5"> </div> </div> </div> <div class="modal-buttons"> <button class="secondary" onclick="hideEditModal()">Cancelar</button> <button onclick="saveDisciplineChanges()">Salvar</button> </div> </div> </div>

    <div class="tooltip" id="tooltip"></div>

</body>
</html>